<!DOCTYPE html>
<html>
<head>
    <title>DR Report Test Tool</title>
    <meta charset="utf-8">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #007acc;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 8px;
        }
        .test-case {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .test-case h3 {
            margin-top: 0;
            color: #007acc;
        }
        .test-case p {
            margin: 5px 0;
            color: #666;
        }
        .json-input {
            width: 100%;
            min-height: 100px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            border: 1px solid #ccc;
            border-radius: 3px;
            padding: 10px;
            margin: 10px 0;
            box-sizing: border-box;
            background-color: #fff;
        }
        .json-data {
            background-color: #f0f0f0;
            padding: 10px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin: 10px 0;
            border: 1px solid #ddd;
        }
        button {
            background-color: #007acc;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px 5px 5px 0;
        }
        button:hover {
            background-color: #005a9e;
        }
        button:active {
            background-color: #004275;
        }
        .button-secondary {
            background-color: #6c757d;
        }
        .button-secondary:hover {
            background-color: #5a6268;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .result.success {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }
        .result.error {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }
        .result.info {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }
        .all-tests {
            background-color: #28a745;
            margin: 20px 0;
            padding: 10px 20px;
            font-size: 16px;
        }
        .all-tests:hover {
            background-color: #218838;
        }
        .custom-test {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .custom-test h3 {
            color: #856404;
            margin-top: 0;
        }
        label {
            display: block;
            margin: 10px 0 5px 0;
            font-weight: bold;
            color: #333;
        }
        .button-group {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>DR Report æµ‹è¯•å·¥å…·</h1>
        <p>æµ‹è¯•åœ°å€ï¼šhttp://127.0.0.1:54331/dr_report</p>
        
        <!-- è‡ªå®šä¹‰æµ‹è¯•åŒºåŸŸ -->
        <div class="custom-test">
            <h3>ğŸ”§ è‡ªå®šä¹‰æµ‹è¯•</h3>
            <p>åœ¨æ­¤åŒºåŸŸå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹JSONæ•°æ®ï¼Œè¿›è¡Œçµæ´»çš„æµ‹è¯•</p>
            
            <label for="custom-cmd">å‘½ä»¤å­— (cmd):</label>
            <input type="text" id="custom-cmd" value="5234" style="width: 100%; padding: 8px; font-family: 'Courier New', monospace;">
            
            <label for="custom-report">ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="custom-report" class="json-input" placeholder="è¾“å…¥JSONæ ¼å¼çš„reportæ•°æ®">{
  "_01_monitorID": 100,
  "_02_policyID": 200,
  "_03_action": 1,
  "_04_operator": "admin",
  "_05_data1": "test_data_1",
  "_06_data2": "test_data_2",
  "_07_value": "test_value"
}</textarea>
            
            <div class="button-group">
                <button onclick="testCustom()">æ‰§è¡Œè‡ªå®šä¹‰æµ‹è¯•</button>
                <button class="button-secondary" onclick="generateCustomJson()">ç”ŸæˆJSON</button>
                <button class="button-secondary" onclick="resetCustom()">é‡ç½®ä¸ºé»˜è®¤</button>
            </div>
            <div id="custom-result" class="result" style="display:none;"></div>
        </div>
        
        <button class="all-tests" onclick="runAllTests()">è¿è¡Œæ‰€æœ‰é¢„è®¾æµ‹è¯•</button>
        
        <div id="test-results"></div>
        
        <h2>å•é¡¹æµ‹è¯•ï¼ˆå¯ç¼–è¾‘ï¼‰</h2>
        
        <!-- æ­£å¸¸åœºæ™¯æµ‹è¯• -->
        <div class="test-case">
            <h3>æµ‹è¯•1ï¼šæ­£å¸¸ä¸ŠæŠ¥ï¼ˆcmd=5234ï¼‰</h3>
            <p>æè¿°ï¼šæ­£ç¡®çš„JSONæ ¼å¼ï¼Œç¬¦åˆæ‰€æœ‰çº¦æŸæ¡ä»¶</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-1" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-1" class="json-input">{
  "_01_monitorID": 100,
  "_02_policyID": 200,
  "_03_action": 1,
  "_04_operator": "admin",
  "_05_data1": "test_data_1",
  "_06_data2": "test_data_2",
  "_07_value": "test_value"
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(1)">æ‰§è¡Œæµ‹è¯•1ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(1)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result1" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•2ï¼šç¼ºå°‘cmdå­—æ®µ -->
        <div class="test-case">
            <h3>æµ‹è¯•2ï¼šç¼ºå°‘cmdå­—æ®µ</h3>
            <p>æè¿°ï¼šJSONä¸­ç¼ºå°‘å¿…éœ€çš„cmdå­—æ®µ</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-2" value="" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-2" class="json-input">{
  "_01_monitorID": 100,
  "_02_policyID": 200
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(2)">æ‰§è¡Œæµ‹è¯•2ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(2)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result2" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•3ï¼šcmdç±»å‹é”™è¯¯ -->
        <div class="test-case">
            <h3>æµ‹è¯•3ï¼šcmdç±»å‹é”™è¯¯ï¼ˆåº”ä¸ºintï¼‰</h3>
            <p>æè¿°ï¼šcmdå­—æ®µç±»å‹ä¸æ˜¯æ•´æ•°</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-3" value="\"5234\"" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-3" class="json-input">{
  "_01_monitorID": 100
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(3)">æ‰§è¡Œæµ‹è¯•3ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(3)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result3" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•4ï¼šç¼ºå°‘reportå­—æ®µ -->
        <div class="test-case">
            <h3>æµ‹è¯•4ï¼šç¼ºå°‘reportå­—æ®µ</h3>
            <p>æè¿°ï¼šJSONä¸­ç¼ºå°‘å¿…éœ€çš„reportå­—æ®µ</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-4" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-4" class="json-input"></textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(4)">æ‰§è¡Œæµ‹è¯•4ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(4)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result4" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•5ï¼šreportä¸æ˜¯å¯¹è±¡ -->
        <div class="test-case">
            <h3>æµ‹è¯•5ï¼šreportä¸æ˜¯å¯¹è±¡</h3>
            <p>æè¿°ï¼šreportå­—æ®µç±»å‹ä¸æ˜¯å¯¹è±¡</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-5" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-5" class="json-input">\"not_an_object\"</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(5)">æ‰§è¡Œæµ‹è¯•5ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(5)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result5" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•6ï¼šreportä¸ºç©º -->
        <div class="test-case">
            <h3>æµ‹è¯•6ï¼šreportæˆå‘˜ä¸ºç©º</h3>
            <p>æè¿°ï¼šreportå¯¹è±¡ä¸­æ²¡æœ‰æˆå‘˜</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-6" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-6" class="json-input">{}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(6)">æ‰§è¡Œæµ‹è¯•6ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(6)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result6" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•7ï¼šKeyé•¿åº¦ä¸è¶³ -->
        <div class="test-case">
            <h3>æµ‹è¯•7ï¼šKeyé•¿åº¦ä¸è¶³ï¼ˆ<=4ï¼‰</h3>
            <p>æè¿°ï¼šKeyé•¿åº¦å¿…é¡»å¤§äº4ä¸ªå­—ç¬¦</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-7" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-7" class="json-input">{
  "_01_a": 1,
  "_02_b": 2,
  "_abc": 3
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(7)">æ‰§è¡Œæµ‹è¯•7ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(7)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result7" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•8ï¼šKeyæ ¼å¼ä¸åŒ¹é… -->
        <div class="test-case">
            <h3>æµ‹è¯•8ï¼šKeyæ ¼å¼ä¸åŒ¹é…ï¼ˆä¸æ˜¯_xx_æ ¼å¼ï¼‰</h3>
            <p>æè¿°ï¼šKeyå¿…é¡»ç¬¦åˆ _xx_ æ ¼å¼</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-8" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-8" class="json-input">{
  "_01_a": 1,
  "__02_b": 2
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(8)">æ‰§è¡Œæµ‹è¯•8ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(8)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result8" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•9ï¼šKeyä½ç½®1-2ä¸æ˜¯æ•°å­— -->
        <div class="test-case">
            <h3>æµ‹è¯•9ï¼šKeyä½ç½®1-2ä¸æ˜¯æ•°å­—</h3>
            <p>æè¿°ï¼šKeyçš„ç¬¬1-2ä¸ªå­—ç¬¦å¿…é¡»æ˜¯æ•°å­—</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-9" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-9" class="json-input">{
  "_01_a": 1,
  "_0a_b": 2
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(9)">æ‰§è¡Œæµ‹è¯•9ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(9)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result9" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•10ï¼šValueç±»å‹ä¸æ”¯æŒ -->
        <div class="test-case">
            <h3>æµ‹è¯•10ï¼šValueç±»å‹ä¸æ”¯æŒï¼ˆæ”¯æŒintå’Œstringï¼‰</h3>
            <p>æè¿°ï¼šValueå¿…é¡»æ˜¯intæˆ–stringç±»å‹</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-10" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-10" class="json-input">{
  "_01_a": 1,
  "_02_b": true,
  "_03_c": "string_value"
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(10)">æ‰§è¡Œæµ‹è¯•10ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(10)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result10" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•11ï¼šä¸æ”¯æŒçš„å‘½ä»¤å­— -->
        <div class="test-case">
            <h3>æµ‹è¯•11ï¼šä¸æ”¯æŒçš„å‘½ä»¤å­—</h3>
            <p>æè¿°ï¼šå‘½ä»¤å­—ä¸åœ¨æ”¯æŒåˆ—è¡¨ä¸­</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-11" value="9999" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-11" class="json-input">{
  "_01_a": 1,
  "_02_b": 2
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(11)">æ‰§è¡Œæµ‹è¯•11ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(11)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result11" class="result" style="display:none;"></div>
        </div>
        
        <!-- æµ‹è¯•12ï¼šæ— æ•ˆJSONæ ¼å¼ -->
        <div class="test-case">
            <h3>æµ‹è¯•12ï¼šæ— æ•ˆJSONæ ¼å¼</h3>
            <p>æè¿°ï¼šJSONæ ¼å¼é”™è¯¯ï¼Œæ— æ³•è§£æ</p>
            <label>å‘½ä»¤å­—:</label>
            <input type="text" id="cmd-12" value="5234" style="width: 200px; padding: 5px; font-family: 'Courier New', monospace;">
            <label>ä¸ŠæŠ¥å†…å®¹ (report):</label>
            <textarea id="json-12" class="json-input">{
  "_01_a": 1,
  "_02_b": 2,
}</textarea>
            <div class="button-group">
                <button onclick="testWithCustomData(12)">æ‰§è¡Œæµ‹è¯•12ï¼ˆä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ï¼‰</button>
                <button class="button-secondary" onclick="resetTestData(12)">é‡ç½®ä¸ºé¢„è®¾</button>
            </div>
            <div id="result12" class="result" style="display:none;"></div>
        </div>
    </div>

    <script>
        // é¢„è®¾æµ‹è¯•æ•°æ®
        const presetData = {
            1: { cmd: '5234', report: '{\n  "_01_monitorID": 100,\n  "_02_policyID": 200,\n  "_03_action": 1,\n  "_04_operator": "admin",\n  "_05_data1": "test_data_1",\n  "_06_data2": "test_data_2",\n  "_07_value": "test_value"\n}' },
            2: { cmd: '', report: '{\n  "_01_monitorID": 100,\n  "_02_policyID": 200\n}' },
            3: { cmd: '"5234"', report: '{\n  "_01_monitorID": 100\n}' },
            4: { cmd: '5234', report: '' },
            5: { cmd: '5234', report: '"not_an_object"' },
            6: { cmd: '5234', report: '{}' },
            7: { cmd: '5234', report: '{\n  "_01_a": 1,\n  "_02_b": 2,\n  "_abc": 3\n}' },
            8: { cmd: '5234', report: '{\n  "_01_a": 1,\n  "__02_b": 2\n}' },
            9: { cmd: '5234', report: '{\n  "_01_a": 1,\n  "_0a_b": 2\n}' },
            10: { cmd: '5234', report: '{\n  "_01_a": 1,\n  "_02_b": true,\n  "_03_c": "string_value"\n}' },
            11: { cmd: '9999', report: '{\n  "_01_a": 1,\n  "_02_b": 2\n}' },
            12: { cmd: '5234', report: '{\n  "_01_a": 1,\n  "_02_b": 2,\n}' }
        };

        // å‘é€POSTè¯·æ±‚çš„å‡½æ•°
        function sendPostRequest(jsonData, resultDivId, testName) {
            const xhr = new XMLHttpRequest();
            const resultDiv = document.getElementById(resultDivId);
            
            xhr.open('POST', 'http://127.0.0.1:54331/dr_report', true);
            xhr.setRequestHeader('Content-Type', 'application/json');
            
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4) {
                    const response = xhr.responseText;
                    let resultClass = 'result info';
                    let message = '';
                    
                    try {
                        const jsonResponse = JSON.parse(response);
                        if (jsonResponse.error_code === 0) {
                            resultClass = 'result success';
                            message = 'âœ“ ' + testName + ' æˆåŠŸ\n';
                        } else {
                            resultClass = 'result error';
                            message = 'âœ— ' + testName + ' å¤±è´¥\n';
                        }
                        message += 'é”™è¯¯ç : ' + jsonResponse.error_code + '\n';
                        message += 'æ¶ˆæ¯: ' + jsonResponse.msg;
                    } catch (e) {
                        resultClass = 'result error';
                        message = 'âœ— ' + testName + ' å¤±è´¥\n';
                        message += 'å“åº”: ' + response + '\n';
                        message += 'å¼‚å¸¸: ' + e.message;
                    }
                    
                    resultDiv.className = resultClass;
                    resultDiv.textContent = message;
                    resultDiv.style.display = 'block';
                }
            };
            
            xhr.onerror = function() {
                const resultDiv = document.getElementById(resultDivId);
                resultDiv.className = 'result error';
                resultDiv.textContent = 'âœ— ' + testName + ' å¤±è´¥\nç½‘ç»œé”™è¯¯: æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨\nè¯·ç¡®ä¿æœåŠ¡è¿è¡Œåœ¨ http://127.0.0.1:54331';
                resultDiv.style.display = 'block';
            };
            
            xhr.send(jsonData);
            
            // æ˜¾ç¤ºåŠ è½½ä¸­
            resultDiv.className = 'result info';
            resultDiv.textContent = 'æ­£åœ¨å‘é€è¯·æ±‚...';
            resultDiv.style.display = 'block';
        }

        // ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®æµ‹è¯•ï¼ˆæŒ‡å®šæµ‹è¯•ç¼–å·ï¼‰
        function testWithCustomData(testNumber) {
            const cmd = document.getElementById('cmd-' + testNumber).value;
            const report = document.getElementById('json-' + testNumber).value;
            const testName = 'æµ‹è¯•' + testNumber + 'ï¼ˆè‡ªå®šä¹‰æ•°æ®ï¼‰';
            
            let jsonData;
            if (cmd === '') {
                // æ²¡æœ‰cmdå­—æ®µ
                jsonData = JSON.stringify({ report: report ? JSON.parse(report) : {} }, null, 0);
            } else {
                // æœ‰cmdå­—æ®µ
                jsonData = JSON.stringify({ 
                    cmd: cmd.startsWith('"') ? JSON.parse(cmd) : parseInt(cmd), 
                    report: report ? JSON.parse(report) : {} 
                }, null, 0);
            }
            
            sendPostRequest(jsonData, 'result' + testNumber, testName);
        }

        // é‡ç½®æµ‹è¯•æ•°æ®ä¸ºé¢„è®¾å€¼
        function resetTestData(testNumber) {
            const preset = presetData[testNumber];
            if (preset) {
                document.getElementById('cmd-' + testNumber).value = preset.cmd;
                document.getElementById('json-' + testNumber).value = preset.report;
                document.getElementById('result' + testNumber).style.display = 'none';
            }
        }

        // è‡ªå®šä¹‰æµ‹è¯•åŠŸèƒ½
        function testCustom() {
            const cmd = document.getElementById('custom-cmd').value;
            const report = document.getElementById('custom-report').value;
            
            try {
                let jsonData;
                if (cmd.trim() === '') {
                    jsonData = JSON.stringify({ report: JSON.parse(report) }, null, 0);
                } else {
                    jsonData = JSON.stringify({ 
                        cmd: isNaN(cmd) ? JSON.parse(cmd) : parseInt(cmd), 
                        report: JSON.parse(report) 
                    }, null, 0);
                }
                sendPostRequest(jsonData, 'custom-result', 'è‡ªå®šä¹‰æµ‹è¯•');
            } catch (e) {
                const resultDiv = document.getElementById('custom-result');
                resultDiv.className = 'result error';
                resultDiv.textContent = 'âœ— JSONæ ¼å¼é”™è¯¯\n' + e.message;
                resultDiv.style.display = 'block';
            }
        }

        // ç”ŸæˆJSON
        function generateCustomJson() {
            const cmd = document.getElementById('custom-cmd').value;
            const report = document.getElementById('custom-report').value;
            
            try {
                let jsonObj;
                if (cmd.trim() === '') {
                    jsonObj = { report: JSON.parse(report) };
                } else {
                    jsonObj = { 
                        cmd: isNaN(cmd) ? JSON.parse(cmd) : parseInt(cmd), 
                        report: JSON.parse(report) 
                    };
                }
                
                const formattedJson = JSON.stringify(jsonObj, null, 2);
                document.getElementById('custom-result').className = 'result info';
                document.getElementById('custom-result').textContent = 'ç”Ÿæˆçš„JSON:\n' + formattedJson;
                document.getElementById('custom-result').style.display = 'block';
            } catch (e) {
                const resultDiv = document.getElementById('custom-result');
                resultDiv.className = 'result error';
                resultDiv.textContent = 'âœ— JSONæ ¼å¼é”™è¯¯\n' + e.message;
                resultDiv.style.display = 'block';
            }
        }

        // é‡ç½®è‡ªå®šä¹‰åŒºåŸŸ
        function resetCustom() {
            document.getElementById('custom-cmd').value = '5234';
            document.getElementById('custom-report').value = '{\n  "_01_monitorID": 100,\n  "_02_policyID": 200,\n  "_03_action": 1,\n  "_04_operator": "admin",\n  "_05_data1": "test_data_1",\n  "_06_data2": "test_data_2",\n  "_07_value": "test_value"\n}';
            document.getElementById('custom-result').style.display = 'none';
        }

        // é¢„è®¾çš„æµ‹è¯•å‡½æ•°ï¼ˆä¿æŒä¸å˜ï¼‰
        function testNormalCase() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {
                    "_01_monitorID": 100,
                    "_02_policyID": 200,
                    "_03_action": 1,
                    "_04_operator": "admin",
                    "_05_data1": "test_data_1",
                    "_06_data2": "test_data_2",
                    "_07_value": "test_value"
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result1', 'æ­£å¸¸ä¸ŠæŠ¥');
        }
        
        function testMissingCmd() {
            const jsonData = JSON.stringify({
                "report": {
                    "_01_monitorID": 100,
                    "_02_policyID": 200
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result2', 'ç¼ºå°‘cmdå­—æ®µ');
        }
        
        function testInvalidCmdType() {
            const jsonData = JSON.stringify({
                "cmd": "5234",
                "report": {
                    "_01_monitorID": 100
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result3', 'cmdç±»å‹é”™è¯¯');
        }
        
        function testMissingReport() {
            const jsonData = JSON.stringify({
                "cmd": 5234
            }, null, 0);
            sendPostRequest(jsonData, 'result4', 'ç¼ºå°‘reportå­—æ®µ');
        }
        
        function testInvalidReportType() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": "not_an_object"
            }, null, 0);
            sendPostRequest(jsonData, 'result5', 'reportä¸æ˜¯å¯¹è±¡');
        }
        
        function testEmptyReport() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {}
            }, null, 0);
            sendPostRequest(jsonData, 'result6', 'reportä¸ºç©º');
        }
        
        function testShortKey() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {
                    "_01_a": 1,
                    "_02_b": 2,
                    "_abc": 3
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result7', 'Keyé•¿åº¦ä¸è¶³');
        }
        
        function testInvalidKeyFormat() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {
                    "_01_a": 1,
                    "__02_b": 2
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result8', 'Keyæ ¼å¼ä¸åŒ¹é…');
        }
        
        function testNonDigitKey() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {
                    "_01_a": 1,
                    "_0a_b": 2
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result9', 'Keyä½ç½®1-2ä¸æ˜¯æ•°å­—');
        }
        
        function testInvalidValueType() {
            const jsonData = JSON.stringify({
                "cmd": 5234,
                "report": {
                    "_01_a": 1,
                    "_02_b": true,
                    "_03_c": "string_value"
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result10', 'Valueç±»å‹ä¸æ”¯æŒ');
        }
        
        function testUnsupportedCmd() {
            const jsonData = JSON.stringify({
                "cmd": 9999,
                "report": {
                    "_01_a": 1,
                    "_02_b": 2
                }
            }, null, 0);
            sendPostRequest(jsonData, 'result11', 'ä¸æ”¯æŒçš„å‘½ä»¤å­—');
        }
        
        function testInvalidJson() {
            const jsonData = '{"cmd": 5234, "report": {"_01_a": 1, "_02_b": 2,}}';
            sendPostRequest(jsonData, 'result12', 'æ— æ•ˆJSONæ ¼å¼');
        }
        
        function runAllTests() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<h3>æ‰¹é‡æµ‹è¯•ç»“æœ</h3>';
            
            setTimeout(testNormalCase, 100);
            setTimeout(testMissingCmd, 300);
            setTimeout(testInvalidCmdType, 500);
            setTimeout(testMissingReport, 700);
            setTimeout(testInvalidReportType, 900);
            setTimeout(testEmptyReport, 1100);
            setTimeout(testShortKey, 1300);
            setTimeout(testInvalidKeyFormat, 1500);
            setTimeout(testNonDigitKey, 1700);
            setTimeout(testInvalidValueType, 1900);
            setTimeout(testUnsupportedCmd, 2100);
            setTimeout(testInvalidJson, 2300);
            
            resultsDiv.innerHTML += '<p>æ­£åœ¨æ‰§è¡Œæ‰€æœ‰æµ‹è¯•...</p>';
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            // ä¸ºæ‰€æœ‰è¾“å…¥æ¡†æ·»åŠ ä¿å­˜åŠŸèƒ½ï¼ˆå¯é€‰ï¼‰
            const inputs = document.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('change', function() {
                    console.log('æ•°æ®å·²ä¿®æ”¹:', this.id);
                });
            });
        };
    </script>
</body>
</html>
